<!DOCTYPE html>
<html lang="es">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>SII UPAtlacomulco</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="icono/png" href="/public/images/upa_logo.png">
    <link rel="stylesheet" href="/public/css/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        html,
        body,
        h1,
        h2,
        h3,
        h4,
        h5 {
            font-family: "Raleway", sans-serif
        }

        .ancho-avatar {
            width: 46px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid #dddddd;
            text-align: center;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
        }

        .selected {
            background-color: black;
            color: white;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: lightgray;
            /* Color de fondo para las horas */
        }
        .input-container {
            display: flex;
            align-items: center;
        }

        .input-container input {
            width: 250px; /* Ajusta el valor según sea necesario */
            padding: 3px;
            font-size: 14px;
        }
    </style>
    
</head>

<body class="w3-light-grey">

    <!-- Top container -->
    <div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
        <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey"
            onclick="w3_open();"><i class="fa fa-bars"></i> &nbsp;Menu</button>
        <span class="w3-bar-item w3-right"><img src="/public/images/upa_logo.png" style="width:46px"> SII
            UPAtlacomulco</span>
    </div>

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
        <div class="w3-container w3-row">
            <div class="w3-col s4">
                <img src="/public/images/avatar2.png" class="w3-circle w3-margin-right ancho-avatar">
            </div>
            <div class="w3-col s8 w3-bar">
                <br>
                <span>Hola, <strong>{nombrePersona}</strong></span>
            </div>
        </div>
        <hr>
        <div class="w3-container w3-green">
            <h5>MENU</h5>
        </div>
        <div class="w3-bar-block">
            <a href="https://sii.upatlacomulco.edu.mx/alumnos/index#"
                class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black"
                onclick="w3_close()" title="cerrar menu"><i class="fa fa-remove fa-fw"></i>&nbsp; Cerrar Menu</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/index" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-home fa-fw"></i>&nbsp; INICIO</a>

            <a href="http://www.talleres.local/talleres/crear" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-futbol-o"></i>&nbsp; TALLERES</a>

            <a href="http://www.talleres.local/talleres/tallerista" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-futbol-o"></i>&nbsp; TALLERISTAS</a>

            <a href="http://www.talleres.local/talleres/crearGrupoTaller" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-futbol-o"></i>&nbsp; GRUPO-TALLER</a>

            <a href="http://www.talleres.local/talleres/verGrupoTaller" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-futbol-o"></i>&nbsp; ESTUDIANTE TALLER</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/formularioAspirantes"
                class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-user-o fa-fw"></i>&nbsp; ACTUALIZAR DATOS</a>

            <a href="https://sii.upatlacomulco.edu.mx/clases/alumnos" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-address-book-o fa-fw"></i>&nbsp; DATOS PERSONALES</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/mapa_curricular"
                class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-table fa-fw"></i>&nbsp; MAPA CURRICULAR</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/consulta_actas" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-file-o fa-fw"></i>&nbsp; ACTA DE CALIFICACIONES</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/historial_alumnos"
                class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-folder-open-o fa-fw"></i>&nbsp; HISTORIAL ACADÉMICO</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/chgpase" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-unlock-alt fa-fw"></i>&nbsp; NIP</a>

            <a href="https://sii.upatlacomulco.edu.mx/alumnos/salir" class="w3-bar-item w3-button w3-padding ">
                <i class="fa fa-sign-out fa-fw"></i>&nbsp; SALIR Y CERRAR SESIÓN</a>

        </div>
    </nav>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer"
        title="cerrar menu" id="myOverlay"></div>
    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:300px;margin-top:43px;">

        <!-- Header -->
        <header class="w3-container" style="padding-top:22px">
            <h5><b><i class="fa fa-futbol-o"></i> CREAR GRUPO DE TALLER</b></h5>
        </header>

        <div class="w3-container w3-dark-grey w3-padding">


            <div class="w3-container">
                <form id="grupoTallerForm" class="w3-container" action="/talleres/guardarGrupoTaller/" method="post"
                    enctype="multipart/form-data">

                    <div class="w3-container w3-padding">

                        <!--PERIODO-->
                        <div class="w3-container w3-padding">
                            <label for="idperiodo" class="w3-text-white"></label>
                            <span>{periodo_actual}</span>
                            <input type="hidden" name="idperiodo" value="{idperiodo}">
                        </div>
                        <!--PERIODO-->

                        <link rel="stylesheet"
                            href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">
                        <!-- Select2 CSS -->
                        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
                            rel="stylesheet" />



                        <select name="idtallerista" class="w3-input w3-round select2 select-tallerista"
                            style="width:100%;">
                            <option value="">-- SELECCIONA TALLERISTA --</option>
                            <!--LISTA_TALLERISTAS-->
                            <option value="{idtallerista}">{nombre_talleristas}</option>
                            <!--LISTA_TALLERISTAS-->
                        </select>
                    </div>

                    <div class="w3-container w3-padding">

                        <select name="idtalleres" class="w3-input w3-round select2 select-taller" style="width:100%;">
                            <option value="">-- SELECCIONA TALLER --</option>
                            <!--LISTA_TALLERES-->
                            <option value="{idtalleres}">{nombre_taller}</option>
                            <!--LISTA_TALLERES-->
                        </select>
                    </div>

                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
                    <script>
                        $(document).ready(function () {
                            // Configurar el idioma de Select2 para mostrar "No se encontraron resultados"
                            $.fn.select2.defaults.set('language', {
                                noResults: function () {
                                    return "NO SE ENCONTRARON RESULTADOS";
                                }
                            });
                
                            // Inicializar selectores con Select2
                            $('.select-tallerista').select2({
                                placeholder: "-- SELECCIONA TALLERISTA --",
                                allowClear: true
                            });
                
                            $('.select-taller').select2({
                                placeholder: "-- SELECCIONA TALLER --",
                                allowClear: true
                            });
                
                            // Enfocar el campo de búsqueda cuando se abre el selector
                            $('.select2').on('select2:open', function () {
                                let searchField = $('.select2-container--open .select2-search__field');
                                searchField.focus();
                            });
                
                            // Validar el formulario al enviar
                            $('#grupoTallerForm').on('submit', function (e) {
                                let talleristaSeleccionado = $('.select-tallerista').val();
                                let tallerSeleccionado = $('.select-taller').val();
                                let cupo = $('#cupo').val().trim();
                
                                if (talleristaSeleccionado === "") {
                                    alert("Selecciona un tallerista");
                                    e.preventDefault();
                                } else if (tallerSeleccionado === "") {
                                    alert("Selecciona un taller");
                                    e.preventDefault();
                                } else if (cupo === "") {
                                    alert("Ingresa un cupo");
                                    e.preventDefault();
                                }
                            });
                        });
                    </script>

                    <div class="input-container w3-padding">

                        <label for="cupo">CUPO:</label>
                        <input class="w3-round" type="number" name="cupo" id="cupo" min="1" max="40" placeholder="NOTA: CUPO MÁXIMO DE 40">
                    </div>
                    <div class="w3-container w3-padding">
                        <input class="w3-button w3-green w3-round w3-right" type="submit" value="GUARDAR"
                            name="guardar-grupo-taller">
                    </div>
                </form>
                <table class="w3-table-all w3-text-black">
                    <tr>
                        <th>ID GRUPO TALLER</th>
                        <th>NOMBRE TALLERISTA</th>
                        <th>TALLER</th>
                        <th>PERIODO</th>
                        <th>CUPO</th>
                        <th>ACCIONES</th>


                    </tr>
                    <!--GRUPO_TALLERES-->
                    <tr>

                        <td> {idgrupo_talleres} </td>
                        <td>{nombre_talleristas}</td>
                        <td>{nombre_taller}</td>
                        <td>{periodo}</td>
                        <td>{cupo}</td>
                        <td>
                            <a class="w3-button w3-green w3-round" href="/talleres/horario/{idgrupo_talleres}">HORAS
                            </a>

                            <input class="w3-button w3-green w3-round" name="button" type="button"
                                onclick="confirmarEliminar()" value="ELIMINAR" />
                            <script>
                                function confirmarEliminar() {
                                    if (confirm('¿Quieres eliminar este Grupo?')) {
                                        window.location.href = "/talleres/eliminarGrupoTaller/{idgrupo_talleres}";
                                    } else {
                                        console.log('Operación Cancelada');
                                    }
                                }
                            </script>
                        </td>
                    </tr>
                    <!--GRUPO_TALLERES-->
                </table>


            </div>
            <style>
                .w3-table-all td {
                    vertical-align: middle;
                }

                .w3-table-all td a,
                .w3-table-all td input[type="button"] {
                    display: inline-block;
                    margin: 2px;
                }
            </style>
        </div>


        <!-- Footer -->
        <footer class="w3-container w3-padding-16 w3-light-grey">
            <p><i style="font-size: 16px" class="fa"></i>
                Universidad Politécnica de Atlacomulco,
                Km. 5 Carretera Atlacomulco - San José Toxi,
                Santo Domingo Shomeje, Atlacomulco de Fabela,
                Estado de México. Tel. (712) 690 3020
            </p>
        </footer>

        <!-- End page content -->
    </div>
    
    <script>
        document.getElementById('cupo').addEventListener('input', function (event) {
            var value = parseInt(event.target.value, 10);
            if (value > 40) {
                event.target.value = 40;
            }
        });
    </script>

    <script>
        var mySidebar = document.getElementById("mySidebar");
        var overlayBg = document.getElementById("myOverlay");
        function w3_open() {
            if (mySidebar.style.display === 'block') {
                mySidebar.style.display = 'none';
                overlayBg.style.display = "none";
            } else {
                mySidebar.style.display = 'block';
                overlayBg.style.display = "block";
            }
        }
        function w3_close() {
            mySidebar.style.display = "none";
            overlayBg.style.display = "none";
        }

    </script>


</body>

</html>